<div *ngIf="obpSearchForm">
    <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6">
            <h1>SEARCH OBSOLETE PRODUCT</h1>
            <br><br>
            <p style="font-size: 23px;">Please Select any two dates to find out the obsolete products between those dates</p>
            <br>
            <table class="table">
                <br>
                <tr>
                    <td>
                        <input class="inputField" type="date" required #start (change)="startDateValidation(start,end)" placeholder="START DATE : ">

                        <span *ngIf="dateStatus">
                          Please enter a valid date
                        </span>

                    </td>
                </tr>
                <br>
                <tr>
                    <td>

                        <input class="inputField" type="date" required #end [max]="today" min={{start}} (change)="endDateValidation(start,end)" placeholder="END DATE : ">

                    </td>
                </tr>
                <br>
                <tr>
                    <td>

                        <select class="inputField" #key required="" (change)="selectKey(key)">
                          <option value="key" disabled="">SELECT ANY KEY-SEARCH</option>
                          <option value="VALUE-BASED">VALUE-BASED</option>
                          <option value="QUANTITY-BASED">QUANTITY-BASED</option>
                        </select>

                        <span *ngIf="noKeySelected">
                          Please select a Key Search Option
                        </span>
                    </td>
                </tr>
                <br>
                <div align="center">
                    <span class="warning-msg" *ngIf="dateExceeds" style="text-align: center">
                    Date duration should not exceed more than 30 days and should be more than 1 day.
                    </span>
                    <span class="warning-msg" *ngIf="dateError" style="text-align: center">
                    Date duration should be more than 1 day.
                    </span>
                    <span class="warning-msg" *ngIf="noTransactions" style="text-align: center">
                    Oops! No transactions happen in these time duration.
                    </span>
                    <span class="warning-msg" *ngIf="dataFetchError" style="text-align: center">
                    Oops! Something went wrong Please try again.
                    </span>
                    <span class="warning-msg" *ngIf="missingFields" style="text-align: center">
                    Please fill All Fields.
                    </span>
                </div>
                <br>
                <tr>
                    <td>
                        <div class="option-tab" id="view-data-option-tab" (click)="getOBPDetails(start,end,key)">
                            <table width="100%">
                                <tr>
                                    <td>
                                        <p class="option-tab-text">VIEW OBSOLETE PRODUCTS</p>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <div class="col-lg-3"></div>

    </div>
</div>

<div *ngIf="OBPTableStatus" id="tableContainer">
    <div class="option-tab grow" id="back-button-option-tab" (click)="goTOForm()">
        <table width="100%">
            <tr>
                <td>
                    <p class="option-tab-text">
                        <i class="fa fa-arrow-left" aria-hidden="true"></i>
                    </p>
                </td>
            </tr>
        </table>
    </div>
    <h1><b>MOST OBSELETE PRODUCTS - {{searchKey}}</b></h1>
    <br><br>
    <table width="" id="tableHead" class="tableHeadings table">
        <tr>
            <th class="coloumnHeadStyle ">Sl.no</th>
            <th class="coloumnHeadStyle ">Item Code</th>
            <!-- (click)="sort('item_code','IconUpDownitemCode')" -->
            <th class="coloumnHeadStyle">
                Stock
                <br>
            </th>
            <!-- (click)="sort('item_name','IconUpDownitemName')" -->
            <th class="coloumnHeadStyle ">
                Total Value of Stock
                <br>
            </th>
        </tr>
        <tr id="loadTr" *ngFor="let product of arrayForUI|orderBy:Otype:Oby;let itemIdx = index">
            <td class="coloumnValueStyle ">{{itemIdx+1}}</td>
            <td class="coloumnValueStyle ">{{product.itemCode}}</td>
            <td class="coloumnValueStyle ">{{product.qty}}</td>
            <td class="coloumnValueStyle ">{{product.inr}}</td>

        </tr>
    </table>
</div>

<div *ngIf="loading">
    <h1>Please Wait...</h1>
    <br><br><br>
    <svg width="70" height="20">
      <circle cx="10" cy="10" r="0">
        <animate attributeName="r" from="0" to="10" values="0;10;10;10;0" dur="1000ms" repeatCount="indefinite" />
      </circle>
    
      <circle cx="35" cy="10" r="0">
        <animate attributeName="r" from="0" to="10" values="0;10;10;10;0" begin="200ms" dur="1000ms" repeatCount="indefinite" />
      </circle>
    
      <circle cx="60" cy="10" r="0">
        <animate attributeName="r" from="0" to="10" values="0;10;10;10;0" begin="400ms" dur="1000ms" repeatCount="indefinite" />
      </circle>
    </svg>
</div>